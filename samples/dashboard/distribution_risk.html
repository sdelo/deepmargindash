<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Leviathan — Unique Depositor Distribution</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-b from-[#020617] to-[#0b1226] flex items-center justify-center min-h-screen">
  <!-- Unique Depositor Distribution -->
  <div class="w-[880px] rounded-3xl p-6 bg-white/10 backdrop-blur-2xl backdrop-saturate-150 shadow-2xl border-2 border-amber-400/70 ring-1 ring-cyan-300/40 relative text-white">
    <!-- Ambient Leviathan Glows -->
    <div class="pointer-events-none absolute inset-0 rounded-3xl bg-gradient-to-r from-amber-400/35 via-yellow-500/15 to-transparent blur-2xl -z-10"></div>
    <div class="pointer-events-none absolute inset-0 rounded-3xl bg-gradient-to-br from-cyan-300/20 via-blue-700/20 to-transparent blur-2xl -z-20"></div>

    <!-- Header -->
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-2xl font-extrabold tracking-wide text-amber-300 drop-shadow">Depositor Distribution</h2>
      <span class="text-xs text-cyan-100/80">From <span class='text-amber-300'>PositionManager.positions</span></span>
    </div>
    <div class="h-px w-full bg-gradient-to-r from-transparent via-amber-300/60 to-transparent mb-6"></div>

    <!-- Top Row: Summary + Concentration -->
    <div class="grid grid-cols-3 gap-5 mb-6">
      <div class="rounded-2xl p-4 bg-white/5 border border-amber-400/30">
        <div class="text-xs text-cyan-100/80 mb-1">Unique Depositors</div>
        <div class="text-3xl font-extrabold" id="unique-depositors" data-key="positions.unique_count">312</div>
      </div>
      <div class="rounded-2xl p-4 bg-white/5 border border-amber-400/30">
        <div class="text-xs text-cyan-100/80 mb-1">Top 10 Share</div>
        <div class="text-3xl font-extrabold flex items-baseline gap-1"><span id="top10-share" data-key="positions.top10_share">58.2</span><span class="text-sm">%</span></div>
        <div class="text-[10px] text-cyan-100/60">Sum of top 10 suppliers / total</div>
      </div>
      <div class="rounded-2xl p-4 bg-white/5 border border-amber-400/30 relative overflow-hidden">
        <div class="text-xs text-cyan-100/80 mb-2">Concentration Risk</div>
        <!-- HHI / Gini meter (mock) -->
        <div class="h-2 w-full bg-white/10 rounded-full overflow-hidden">
          <div class="h-full bg-gradient-to-r from-cyan-300 via-amber-300 to-rose-300" style="width: 72%"></div>
        </div>
        <div class="flex justify-between text-[10px] text-cyan-100/60 mt-1">
          <span>Low</span><span>Med</span><span>High</span>
        </div>
        <div class="text-[11px] text-amber-300 mt-2">Gini: <span id="gini" data-key="derived.gini">0.41</span> · HHI: <span id="hhi" data-key="derived.hhi">1,180</span></div>
        <span class="pointer-events-none absolute -right-8 -bottom-8 w-28 h-28 rounded-full bg-amber-300/15 blur-2xl"></span>
      </div>
    </div>

    <!-- Middle Row: Donut Chart + Legend -->
    <div class="grid grid-cols-2 gap-6">
      <!-- Donut Chart (Top N suppliers) -->
      <div class="rounded-2xl p-5 bg-white/5 border border-amber-400/30 relative overflow-hidden">
        <div class="flex items-center justify-between mb-3">
          <div class="text-sm text-cyan-100/90">Top Suppliers — Share of Pool</div>
          <div class="text-[11px] text-cyan-100/70">Top N = 6</div>
        </div>
        <svg viewBox="0 0 220 220" class="w-full h-[260px] mx-auto">
          <defs>
            <linearGradient id="segA" x1="0" x2="1"><stop offset="0%" stop-color="#22d3ee" /><stop offset="100%" stop-color="#67e8f9" /></linearGradient>
            <linearGradient id="segB" x1="0" x2="1"><stop offset="0%" stop-color="#fbbf24" /><stop offset="100%" stop-color="#fde68a" /></linearGradient>
            <linearGradient id="segC" x1="0" x2="1"><stop offset="0%" stop-color="#60a5fa" /><stop offset="100%" stop-color="#93c5fd" /></linearGradient>
            <linearGradient id="segD" x1="0" x2="1"><stop offset="0%" stop-color="#34d399" /><stop offset="100%" stop-color="#6ee7b7" /></linearGradient>
            <linearGradient id="segE" x1="0" x2="1"><stop offset="0%" stop-color="#f472b6" /><stop offset="100%" stop-color="#f9a8d4" /></linearGradient>
            <linearGradient id="segF" x1="0" x2="1"><stop offset="0%" stop-color="#818cf8" /><stop offset="100%" stop-color="#c7d2fe" /></linearGradient>
          </defs>
          <!-- Donut ring -->
          <g transform="translate(110,110)">
            <!-- background ring -->
            <circle r="80" fill="none" stroke="rgba(255,255,255,0.08)" stroke-width="26"></circle>
            <!-- arcs (mock angles) -->
            <!-- A: 28% -->
            <path d="M80 0 A80 80 0 0 1 24.7 75.8" stroke="url(#segA)" stroke-width="26" fill="none" stroke-linecap="butt"></path>
            <!-- B: 18% -->
            <path d="M24.7 75.8 A80 80 0 0 1 -48.0 63.3" stroke="url(#segB)" stroke-width="26" fill="none"></path>
            <!-- C: 12% -->
            <path d="M-48.0 63.3 A80 80 0 0 1 -76.2 25.0" stroke="url(#segC)" stroke-width="26" fill="none"></path>
            <!-- D: 10% -->
            <path d="M-76.2 25.0 A80 80 0 0 1 -76.2 -25.0" stroke="url(#segD)" stroke-width="26" fill="none"></path>
            <!-- E: 8% -->
            <path d="M-76.2 -25.0 A80 80 0 0 1 -48.0 -63.3" stroke="url(#segE)" stroke-width="26" fill="none"></path>
            <!-- F: 24% (wraps to start) -->
            <path d="M-48.0 -63.3 A80 80 0 0 1 80 0" stroke="url(#segF)" stroke-width="26" fill="none"></path>
            <!-- center label -->
            <text x="0" y="5" font-size="18" text-anchor="middle" fill="#e5e7eb">Top 6 = <tspan fill="#fbbf24">100%</tspan></text>
          </g>
        </svg>
        <!-- Glow flares -->
        <span class="pointer-events-none absolute -right-10 -bottom-10 w-36 h-36 rounded-full bg-amber-300/15 blur-2xl"></span>
        <span class="pointer-events-none absolute -left-8 -top-8 w-28 h-28 rounded-full bg-cyan-300/15 blur-2xl"></span>
      </div>

      <!-- Top suppliers table -->
      <div class="rounded-2xl p-5 bg-white/5 border border-amber-400/30">
        <div class="flex items-center justify-between mb-3">
          <div class="text-sm text-cyan-100/90">Top Suppliers</div>
          <div class="text-[11px] text-cyan-100/70">masked addresses</div>
        </div>
        <div class="space-y-3">
          <!-- Row template -->
          <div class="flex items-center gap-3">
            <div class="w-2 h-2 rounded-full bg-cyan-300"></div>
            <div class="text-sm grow">0xA4…7C2F</div>
            <div class="text-sm text-amber-300 font-semibold">28.0%</div>
          </div>
          <div class="flex items-center gap-3">
            <div class="w-2 h-2 rounded-full bg-amber-300"></div>
            <div class="text-sm grow">0x19…B0E1</div>
            <div class="text-sm text-amber-300 font-semibold">18.0%</div>
          </div>
          <div class="flex items-center gap-3">
            <div class="w-2 h-2 rounded-full bg-blue-400"></div>
            <div class="text-sm grow">0xF3…99AA</div>
            <div class="text-sm text-amber-300 font-semibold">12.0%</div>
          </div>
          <div class="flex items-center gap-3">
            <div class="w-2 h-2 rounded-full bg-emerald-400"></div>
            <div class="text-sm grow">0x8D…1120</div>
            <div class="text-sm text-amber-300 font-semibold">10.0%</div>
          </div>
          <div class="flex items-center gap-3">
            <div class="w-2 h-2 rounded-full bg-rose-300"></div>
            <div class="text-sm grow">0x77…4C11</div>
            <div class="text-sm text-amber-300 font-semibold">8.0%</div>
          </div>
          <div class="flex items-center gap-3">
            <div class="w-2 h-2 rounded-full bg-indigo-400"></div>
            <div class="text-sm grow">0xEA…D7F5</div>
            <div class="text-sm text-amber-300 font-semibold">24.0%</div>
          </div>
        </div>
        <div class="mt-4 text-[11px] text-cyan-100/70">Remainder grouped as "Others".</div>
      </div>
    </div>

    <!-- Footnote / Binding hints -->
    <div class="mt-6 text-[11px] text-cyan-100/70 leading-relaxed">
      Build the distribution from <span class="text-amber-300">positions: Table&lt;address, Position&gt;</span> → shares per address. Compute <em>share%</em> = user_shares / total_supply_shares. Optional concentration metrics: <em>HHI</em> = Σ(p_i^2·10,000); <em>Gini</em> from Lorenz curve. Flag whales if a single address &gt; X% or top-k &gt; threshold.
    </div>
  </div>
</body>
</html>
